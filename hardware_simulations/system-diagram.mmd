flowchart TD

  %% === SENSOR INTERFACE LAYER ===
  subgraph SensorLayer [🌱 Sensor Interface Layer]
    direction TB
    IR[🌡️ IR Sensor]
    CO2[🌿 CO₂ Sensor]
    MOIST[💧 Moisture Sensor]
    RGB[📸 RGB Camera]
    SI[🔌 Sensor Interface]
  end

  IR --> SI
  CO2 --> SI
  MOIST --> SI
  RGB --> SI

  %% === LOGIC & INFERENCE LAYER ===
  subgraph LogicLayer [🧠 Logic & Inference Layer]
    direction TB
    AI[🧠 AI Inference Engine]
    XAI[🔍 XAI Output Generator]
    WD[⛑️ Watchdog Logic]
    OV[🧭 Manual Override Crew Input]
    FB[🔁 Fallback Logic]
    FD[🧮 Final Decision Module]
  end

  SI --> AI
  AI --> XAI
  AI --> WD
  WD --> FB
  OV --> FB
  FB --> FD
  XAI --> FD
  AI --> FD

  %% === OUTPUT & COMMUNICATION LAYER ===
  subgraph OutputLayer [📤 Output & Communication Layer]
    direction TB
    MIST[💦 Misting Actuator]
    DISP[🖥️ Crew Display Panel]
    TEL[📡 Telemetry Logger]
    UP[🛰️ Uplink to Earth - Periodic Summary]
  end

  FD --> MIST
  FD --> DISP
  FD --> TEL
  TEL --> UP

